{"version":3,"sources":["webpack:///./src/players/Streamable.js"],"names":["Streamable","callPlayer","iframe","this","props","onMount","url","getSDK","then","playerjs","player","Player","setLoop","loop","on","onReady","onPlay","onPause","onSeek","onEnded","onError","duration","seconds","currentTime","percent","secondsLoaded","muted","mute","fraction","id","match","MATCH_URL_STREAMABLE","ref","src","frameBorder","scrolling","style","width","height","allowFullScreen","Component","canPlay","streamable"],"mappings":"4kDAKA,IAGqBA,E,uaAGNC,K,kBACF,M,qBACG,M,uBACE,M,eAwDT,WACL,EAAKA,WAAW,W,iBAGT,WACP,EAAKA,WAAW,a,cAeZ,SAAAC,GACJ,EAAKA,OAASA,K,2DA1EdC,KAAKC,MAAMC,SAAWF,KAAKC,MAAMC,QAAQF,Q,2BAGrCG,GAAK,WACTC,YAhBY,2CACG,YAeaC,MAAK,SAAAC,GAC1B,EAAKP,SACV,EAAKQ,OAAS,IAAID,EAASE,OAAO,EAAKT,QACvC,EAAKQ,OAAOE,QAAQ,EAAKR,MAAMS,MAC/B,EAAKH,OAAOI,GAAG,QAAS,EAAKV,MAAMW,SACnC,EAAKL,OAAOI,GAAG,OAAQ,EAAKV,MAAMY,QAClC,EAAKN,OAAOI,GAAG,QAAS,EAAKV,MAAMa,SACnC,EAAKP,OAAOI,GAAG,SAAU,EAAKV,MAAMc,QACpC,EAAKR,OAAOI,GAAG,QAAS,EAAKV,MAAMe,SACnC,EAAKT,OAAOI,GAAG,QAAS,EAAKV,MAAMgB,SACnC,EAAKV,OAAOI,GAAG,cAAc,YAA2B,IAAxBO,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QACxC,EAAKD,SAAWA,EAChB,EAAKE,YAAcD,KAErB,EAAKZ,OAAOI,GAAG,YAAY,YAAiB,IAAdU,EAAc,EAAdA,QACxB,EAAKH,WACP,EAAKI,cAAgB,EAAKJ,SAAWG,MAGrC,EAAKpB,MAAMsB,OACb,EAAKhB,OAAOiB,UAEbxB,KAAKC,MAAMgB,W,6BAIdjB,KAAKF,WAAW,U,8BAIhBE,KAAKF,WAAW,W,6DAOVqB,GACNnB,KAAKF,WAAW,iBAAkBqB,K,gCAGzBM,GACTzB,KAAKF,WAAW,YAAwB,IAAX2B,K,8BAGtBf,GACPV,KAAKF,WAAW,UAAWY,K,oCAY3B,OAAOV,KAAKkB,W,uCAIZ,OAAOlB,KAAKoB,c,yCAIZ,OAAOpB,KAAKsB,gB,+BAQZ,IAAMI,EAAK1B,KAAKC,MAAME,IAAIwB,MAAMC,KAAsB,GAKtD,OACE,4BACEC,IAAK7B,KAAK6B,IACVC,IAAG,mCAA8BJ,GACjCK,YAAY,IACZC,UAAU,KACVC,MAVU,CACZC,MAAO,OACPC,OAAQ,QASNC,iBAAe,S,8BAnGiBC,a,EAAnBxC,E,cACE,c,EADFA,E,UAEFyC,IAAQC","file":"8.app.js","sourcesContent":["import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport { canPlay, MATCH_URL_STREAMABLE } from '../patterns'\n\nconst SDK_URL = 'https://cdn.embed.ly/player-0.1.0.min.js'\nconst SDK_GLOBAL = 'playerjs'\n\nexport default class Streamable extends Component {\n  static displayName = 'Streamable'\n  static canPlay = canPlay.streamable\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  secondsLoaded = null\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    getSDK(SDK_URL, SDK_GLOBAL).then(playerjs => {\n      if (!this.iframe) return\n      this.player = new playerjs.Player(this.iframe)\n      this.player.setLoop(this.props.loop)\n      this.player.on('ready', this.props.onReady)\n      this.player.on('play', this.props.onPlay)\n      this.player.on('pause', this.props.onPause)\n      this.player.on('seeked', this.props.onSeek)\n      this.player.on('ended', this.props.onEnded)\n      this.player.on('error', this.props.onError)\n      this.player.on('timeupdate', ({ duration, seconds }) => {\n        this.duration = duration\n        this.currentTime = seconds\n      })\n      this.player.on('buffered', ({ percent }) => {\n        if (this.duration) {\n          this.secondsLoaded = this.duration * percent\n        }\n      })\n      if (this.props.muted) {\n        this.player.mute()\n      }\n    }, this.props.onError)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    // Nothing to do\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('setCurrentTime', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction * 100)\n  }\n\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n\n  mute = () => {\n    this.callPlayer('mute')\n  }\n\n  unmute = () => {\n    this.callPlayer('unmute')\n  }\n\n  getDuration () {\n    return this.duration\n  }\n\n  getCurrentTime () {\n    return this.currentTime\n  }\n\n  getSecondsLoaded () {\n    return this.secondsLoaded\n  }\n\n  ref = iframe => {\n    this.iframe = iframe\n  }\n\n  render () {\n    const id = this.props.url.match(MATCH_URL_STREAMABLE)[1]\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <iframe\n        ref={this.ref}\n        src={`https://streamable.com/o/${id}`}\n        frameBorder='0'\n        scrolling='no'\n        style={style}\n        allowFullScreen\n      />\n    )\n  }\n}\n"],"sourceRoot":""}